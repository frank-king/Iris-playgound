\makeatletter%
\@ifundefined{basedir}{%
\newcommand\basedir{}%
}{}%
\makeatother%

\usepackage{amsthm}
\usepackage{mathpartir}

\usepackage{\basedir pftools}
\usepackage{\basedir iris}
\usepackage{\basedir heaplang}

\theoremstyle{definition}
\newtheorem{example}{Example}
\newtheorem{lem}{Lemma}
\newtheorem{thm}{Theorem}
\newtheorem{exercise}{Exercise}[section]

\newcounter{equationstore}
\AtBeginEnvironment{proof}{\setcounter{equationstore}{\value{equation}}
\setcounter{equation}{0}\renewcommand{\theequation}{\arabic{equation}}}
\AtEndEnvironment{proof}{\setcounter{equation}{\value{equationstore}}}
